filter(year == 2011)
write_csv(dd_data, "CleanData/Main/dd_data.csv") #Difference in differences data
write_csv(es_data, "CleanData/Main/es_data.csv") #Event study data
write_csv(summary_data, "CleanData/Main/summary_data.csv") #summary statistics data
#Change root directory
knitr::opts_knit$set(root.dir = "/Users/liampurkey/Desktop/Research/Gentrification")
#Load packages
library(magrittr)
library(readxl)
library(readr)
library(tidyverse)
library(sf)
library(spData)
library(tmap)
source("Code/Scripts/utils.R")
#Read in shapefile
nyc_shp = st_read("RawData/Boundaries/NewYork.shp")
#Read in gentrification data
gen_data = read_csv("CleanData/Main/summary_data.csv")
#Change root directory
knitr::opts_knit$set(root.dir = "/Users/liampurkey/Desktop/Research/Gentrification")
#Load packages
library(magrittr)
library(readxl)
library(readr)
library(tidyverse)
library(sf)
library(spData)
library(tmap)
source("Code/Scripts/utils.R")
#Read in shapefile
nyc_shp = st_read("RawData/Boundaries/NewYork.shp")
#Read in gentrification data
gen_data = read_csv("CleanData/Main/summary_data.csv") %>%
right_join(nyc_shp, by = "GEOID")
#Change root directory
knitr::opts_knit$set(root.dir = "/Users/liampurkey/Desktop/Research/Gentrification")
#Load packages
library(magrittr)
library(readxl)
library(readr)
library(tidyverse)
library(sf)
library(spData)
library(tmap)
source("Code/Scripts/utils.R")
#Read in shapefile
nyc_shp = st_read("RawData/Boundaries/NewYork.shp")
#Read in gentrification data
gen_data = read_csv("CleanData/Main/summary_data.csv", col_types = col(GEOID = as.character())) %>%
right_join(nyc_shp, by = "GEOID")
#Change root directory
knitr::opts_knit$set(root.dir = "/Users/liampurkey/Desktop/Research/Gentrification")
#Load packages
library(magrittr)
library(readxl)
library(readr)
library(tidyverse)
library(sf)
library(spData)
library(tmap)
source("Code/Scripts/utils.R")
#Read in shapefile
nyc_shp = st_read("RawData/Boundaries/NewYork.shp")
#Read in gentrification data
gen_data = read_csv("CleanData/Main/summary_data.csv", col_types = cols(GEOID = col_character())) %>%
right_join(nyc_shp, by = "GEOID")
gen_data
#Change root directory
knitr::opts_knit$set(root.dir = "/Users/liampurkey/Desktop/Research/Gentrification")
#Load packages
library(magrittr)
library(readxl)
library(readr)
library(tidyverse)
library(sf)
library(spData)
library(tmap)
source("Code/Scripts/utils.R")
#Read in shapefile
nyc_shp = st_read("RawData/Boundaries/NewYork.shp") %>%
left_join(read_csv("CleanData/Main/summary_data.csv", col_types = cols(GEOID = col_character())), by = "GEOID")
nyc_shp
#Change root directory
knitr::opts_knit$set(root.dir = "/Users/liampurkey/Desktop/Research/Gentrification")
#Load packages
library(magrittr)
library(readxl)
library(readr)
library(tidyverse)
library(sf)
library(spData)
library(tmap)
source("Code/Scripts/utils.R")
#Read in shapefile
gen_data = st_read("RawData/Boundaries/NewYork.shp") %>%
left_join(read_csv("CleanData/Main/summary_data.csv", col_types = cols(GEOID = col_character())) %>% select(GEOID, gentrify), by = "GEOID")
gen_data
#Change root directory
knitr::opts_knit$set(root.dir = "/Users/liampurkey/Desktop/Research/Gentrification")
#Load packages
library(magrittr)
library(readxl)
library(readr)
library(tidyverse)
library(sf)
library(spData)
library(tmap)
source("Code/Scripts/utils.R")
#Read in and format shapefile
map_data = st_read("RawData/Boundaries/NewYork.shp") %>%
left_join(read_csv("CleanData/Main/summary_data.csv", col_types = cols(GEOID = col_character())) %>% select(GEOID, gentrify), by = "GEOID") %>%
mutate(gentrify = case_when(gentrify == 0 ~ 0,
gentrify == 1 ~ 1,
is.na(gentrify) ~ 2))
gen_data
#Change root directory
knitr::opts_knit$set(root.dir = "/Users/liampurkey/Desktop/Research/Gentrification")
#Load packages
library(magrittr)
library(readxl)
library(readr)
library(tidyverse)
library(sf)
library(spData)
library(tmap)
source("Code/Scripts/utils.R")
#Read in and format shapefile
map_data = st_read("RawData/Boundaries/NewYork.shp") %>%
left_join(read_csv("CleanData/Main/summary_data.csv", col_types = cols(GEOID = col_character())) %>% select(GEOID, gentrify), by = "GEOID") %>%
mutate(gentrify = case_when(gentrify == 0 ~ 0,
gentrify == 1 ~ 1,
is.na(gentrify) ~ 2))
map_data
#Change root directory
knitr::opts_knit$set(root.dir = "/Users/liampurkey/Desktop/Research/Gentrification")
#Load packages
library(magrittr)
library(readxl)
library(readr)
library(tidyverse)
library(sf)
library(spData)
library(tmap)
source("Code/Scripts/utils.R")
#Read in and format shapefile
map_data = st_read("RawData/Boundaries/NewYork.shp") %>%
left_join(read_csv("CleanData/Main/summary_data.csv", col_types = cols(GEOID = col_character())) %>% select(GEOID, gentrify), by = "GEOID") %>%
mutate(gentrify = case_when(gentrify == 0 ~ 0,
gentrify == 1 ~ 1,
is.na(gentrify) ~ 2))
nyc_out = tm_shape(nyc_map) + tm_polygons("edugentrify", style = "cat", palette = c("#DEEBF7", "#FDBEB9", "red4"),
labels = c("Not in Sample", "Not Gentrifying", "Gentrifying"),
title = "Legend") +
tm_layout(legend.outside = TRUE, legend.text.size = .8, legend.title.size = 1, fontfamily = "Palatino", frame = FALSE,
asp = 1)
#Change root directory
knitr::opts_knit$set(root.dir = "/Users/liampurkey/Desktop/Research/Gentrification")
#Load packages
library(magrittr)
library(readxl)
library(readr)
library(tidyverse)
library(sf)
library(spData)
library(tmap)
source("Code/Scripts/utils.R")
#Read in and format shapefile
map_data = st_read("RawData/Boundaries/NewYork.shp") %>%
left_join(read_csv("CleanData/Main/summary_data.csv", col_types = cols(GEOID = col_character())) %>% select(GEOID, gentrify), by = "GEOID") %>%
mutate(gentrify = case_when(gentrify == 0 ~ 0,
gentrify == 1 ~ 1,
is.na(gentrify) ~ 2))
nyc_map = tm_shape(map_data) + tm_polygons("edugentrify", style = "cat", palette = c("#DEEBF7", "#FDBEB9", "red4"),
labels = c("Not in Sample", "Not Gentrifying", "Gentrifying"),
title = "Legend") +
tm_layout(legend.outside = TRUE, legend.text.size = .8, legend.title.size = 1, fontfamily = "Palatino", frame = FALSE,
asp = 1)
nyc_out
nyc_map
nyc_map = tm_shape(map_data) + tm_polygons("gentrify", style = "cat", palette = c("#DEEBF7", "#FDBEB9", "red4"),
labels = c("Not in Sample", "Not Gentrifying", "Gentrifying"),
title = "Legend") +
tm_layout(legend.outside = TRUE, legend.text.size = .8, legend.title.size = 1, fontfamily = "Palatino", frame = FALSE,
asp = 1)
nyc_map
nyc_map = tm_shape(map_data) + tm_polygons("gentrify", style = "cat", palette = c("#FDBEB9", "red4", "#DEEBF7"),
labels = c("Not Gentrifying", "Gentrifying", "Not in Sample"),
title = "Legend") +
tm_layout(legend.outside = TRUE, legend.text.size = .8, legend.title.size = 1, fontfamily = "Palatino", frame = FALSE,
asp = 1)
nyc_map
#Change root directory
knitr::opts_knit$set(root.dir = "/Users/liampurkey/Desktop/Research/Gentrification")
#Load Packages
library(magrittr)
library(readr)
library(readxl)
library(Ckmeans.1d.dp)
library(tidycensus)
library(tidyverse)
source("Code/Scripts/utils.R")
#Read in data used to create gentrification indicator
acs_data = read_csv("CleanData/ACS_clean.csv", col_types = cols(GEOID = col_character()))
ltdb_data = read_csv("CleanData/LTDB_clean.csv", col_types = cols(GEOID = col_character()))
wac_data = read_csv("CleanData/WAC_clean.csv", col_types = cols(GEOID = col_character()))
input_data = acs_data %>%
group_by(GEOID) %>%
mutate(diff_p_college_pop = lead(p_college_pop, order_by = year) - p_college_pop) %>%
ungroup() %>%
filter(year == 2011) %>%
inner_join(ltdb_data, by = "GEOID") %>%
mutate(pre_p_college_pop = p_college_pop - p_college_pop_2000) %>%
select(GEOID, medianincome, diff_p_college_pop, pre_p_college_pop)
gen_data = create.gentrification(income_var = "medianincome", college_var = "diff_p_college_pop", pre_var = "pre_p_college_pop",
income_pctile = .5, college_pctile_lower = .5, college_pctile_upper = .75, pre_pctile = 1, data = input_data) %>%
select(GEOID, gentrify)
dd_data = wac_data %>%
filter(year == 2011 | year == 2018) %>%
inner_join(gen_data, by = "GEOID") %>%
inner_join(acs_data %>% filter(year == 2011) %>% select(-year), by = "GEOID")
es_data = wac_data %>%
inner_join(gen_data, by = "GEOID") %>%
mutate(gentrify = ifelse(year <= 2011, 0, gentrify))
summary_data = acs_data %>%
inner_join(gen_data, by = "GEOID") %>%
inner_join(wac_data, by = c("GEOID", "year")) %>%
group_by(GEOID) %>%
mutate(across(starts_with("p_"), ~lead(.x, order_by = year) - .x, .names = "diff_{.col}")) %>%
mutate(across(starts_with("d_"), ~(lead(.x, order_by = year) - .x)/.x, .names = "pc_{.col}")) %>%
mutate(across(c(medianhomevalue, medianincome, medianrent, pop), ~(lead(.x, order_by = year) - .x)/.x, .names = "pc_{.col}")) %>%
ungroup() %>%
filter(year == 2011)
write_csv(dd_data, "CleanData/Main/dd_data.csv") #Difference in differences data
write_csv(es_data, "CleanData/Main/es_data.csv") #Event study data
write_csv(summary_data, "CleanData/Main/summary_data.csv") #summary statistics data
#Change root directory
knitr::opts_knit$set(root.dir = "/Users/liampurkey/Desktop/Research/Gentrification")
#Load packages
library(magrittr)
library(readxl)
library(readr)
library(tidyverse)
library(sf)
library(spData)
library(tmap)
source("Code/Scripts/utils.R")
#Read in and format shapefile
map_data = st_read("RawData/Boundaries/NewYork.shp") %>%
left_join(read_csv("CleanData/Main/summary_data.csv", col_types = cols(GEOID = col_character())) %>% select(GEOID, gentrify), by = "GEOID") %>%
mutate(gentrify = case_when(gentrify == 0 ~ 0,
gentrify == 1 ~ 1,
is.na(gentrify) ~ 2))
nyc_map = tm_shape(map_data) + tm_polygons("gentrify", style = "cat", palette = c("#FDBEB9", "red4", "#DEEBF7"),
labels = c("Not Gentrifying", "Gentrifying", "Not in Sample"),
title = "Legend") +
tm_layout(legend.outside = TRUE, legend.text.size = .8, legend.title.size = 1, fontfamily = "Palatino", frame = FALSE,
asp = 1)
nyc_map
#Change root directory
knitr::opts_knit$set(root.dir = "/Users/liampurkey/Desktop/Research/Gentrification")
#Load Packages
library(magrittr)
library(readr)
library(readxl)
library(Ckmeans.1d.dp)
library(tidycensus)
library(tidyverse)
source("Code/Scripts/utils.R")
#Read in data used to create gentrification indicator
acs_data = read_csv("CleanData/ACS_clean.csv", col_types = cols(GEOID = col_character()))
ltdb_data = read_csv("CleanData/LTDB_clean.csv", col_types = cols(GEOID = col_character()))
wac_data = read_csv("CleanData/WAC_clean.csv", col_types = cols(GEOID = col_character()))
input_data = acs_data %>%
group_by(GEOID) %>%
mutate(diff_p_college_pop = lead(p_college_pop, order_by = year) - p_college_pop) %>%
ungroup() %>%
filter(year == 2011) %>%
inner_join(ltdb_data, by = "GEOID") %>%
mutate(pre_p_college_pop = p_college_pop - p_college_pop_2000) %>%
select(GEOID, medianincome, diff_p_college_pop, pre_p_college_pop)
gen_data = create.gentrification(income_var = "medianincome", college_var = "diff_p_college_pop", pre_var = "pre_p_college_pop",
income_pctile = .5, college_pctile_lower = .5, college_pctile_upper = .75, pre_pctile = .75, data = input_data) %>%
select(GEOID, gentrify)
dd_data = wac_data %>%
filter(year == 2011 | year == 2018) %>%
inner_join(gen_data, by = "GEOID") %>%
inner_join(acs_data %>% filter(year == 2011) %>% select(-year), by = "GEOID")
es_data = wac_data %>%
inner_join(gen_data, by = "GEOID") %>%
mutate(gentrify = ifelse(year <= 2011, 0, gentrify))
summary_data = acs_data %>%
inner_join(gen_data, by = "GEOID") %>%
inner_join(wac_data, by = c("GEOID", "year")) %>%
group_by(GEOID) %>%
mutate(across(starts_with("p_"), ~lead(.x, order_by = year) - .x, .names = "diff_{.col}")) %>%
mutate(across(starts_with("d_"), ~(lead(.x, order_by = year) - .x)/.x, .names = "pc_{.col}")) %>%
mutate(across(c(medianhomevalue, medianincome, medianrent, pop), ~(lead(.x, order_by = year) - .x)/.x, .names = "pc_{.col}")) %>%
ungroup() %>%
filter(year == 2011)
write_csv(dd_data, "CleanData/Main/dd_data.csv") #Difference in differences data
write_csv(es_data, "CleanData/Main/es_data.csv") #Event study data
write_csv(summary_data, "CleanData/Main/summary_data.csv") #summary statistics data
#Change root directory
knitr::opts_knit$set(root.dir = "/Users/liampurkey/Desktop/Research/Gentrification")
#Load packages
library(magrittr)
library(readxl)
library(readr)
library(tidyverse)
library(sf)
library(spData)
library(tmap)
source("Code/Scripts/utils.R")
#Read in and format shapefile
map_data = st_read("RawData/Boundaries/NewYork.shp") %>%
left_join(read_csv("CleanData/Main/summary_data.csv", col_types = cols(GEOID = col_character())) %>% select(GEOID, gentrify), by = "GEOID") %>%
mutate(gentrify = case_when(gentrify == 0 ~ 0,
gentrify == 1 ~ 1,
is.na(gentrify) ~ 2))
nyc_map = tm_shape(map_data) + tm_polygons("gentrify", style = "cat", palette = c("#FDBEB9", "red4", "#DEEBF7"),
labels = c("Not Gentrifying", "Gentrifying", "Not in Sample"),
title = "Legend") +
tm_layout(legend.outside = TRUE, legend.text.size = .8, legend.title.size = 1, fontfamily = "Palatino", frame = FALSE,
asp = 1)
nyc_map
#Change root directory
knitr::opts_knit$set(root.dir = "/Users/liampurkey/Desktop/Research/Gentrification")
#Load packages
library(magrittr)
library(readxl)
library(readr)
library(tidyverse)
library(sf)
library(spData)
library(tmap)
source("Code/Scripts/utils.R")
#Read in and format shapefile
map_data = st_read("RawData/Boundaries/NewYork.shp") %>%
left_join(read_csv("CleanData/Main/summary_data.csv", col_types = cols(GEOID = col_character())) %>% select(GEOID, gentrify), by = "GEOID") %>%
mutate(gentrify = case_when(gentrify == 0 ~ 1,
gentrify == 1 ~ 0,
is.na(gentrify) ~ 2))
nyc_map = tm_shape(map_data) + tm_polygons("gentrify", style = "cat", palette = c("red4", "#FDBEB9", "#DEEBF7"),
labels = c("Gentrifying", "Not Gentrifying", "Not in Sample"),
title = "Legend") +
tm_layout(legend.outside = TRUE, legend.text.size = .8, legend.title.size = 1, fontfamily = "Palatino", frame = FALSE,
asp = 1)
nyc_map
#Change root directory
knitr::opts_knit$set(root.dir = "/Users/liampurkey/Desktop/Research/Gentrification")
#Load Packages
library(magrittr)
library(readr)
library(readxl)
library(Ckmeans.1d.dp)
library(tidycensus)
library(tidyverse)
source("Code/Scripts/utils.R")
#Read in data used to create gentrification indicator
acs_data = read_csv("CleanData/ACS_clean.csv", col_types = cols(GEOID = col_character()))
ltdb_data = read_csv("CleanData/LTDB_clean.csv", col_types = cols(GEOID = col_character()))
wac_data = read_csv("CleanData/WAC_clean.csv", col_types = cols(GEOID = col_character()))
input_data = acs_data %>%
group_by(GEOID) %>%
mutate(diff_p_college_pop = lead(p_college_pop, order_by = year) - p_college_pop) %>%
ungroup() %>%
filter(year == 2011) %>%
inner_join(ltdb_data, by = "GEOID") %>%
mutate(pre_p_college_pop = p_college_pop - p_college_pop_2000) %>%
select(GEOID, medianincome, diff_p_college_pop, pre_p_college_pop)
gen_data = create.gentrification(income_var = "medianincome", college_var = "diff_p_college_pop", pre_var = "pre_p_college_pop",
income_pctile = .5, college_pctile_lower = .5, college_pctile_upper = .75, pre_pctile = .9, data = input_data) %>%
select(GEOID, gentrify)
dd_data = wac_data %>%
filter(year == 2011 | year == 2018) %>%
inner_join(gen_data, by = "GEOID") %>%
inner_join(acs_data %>% filter(year == 2011) %>% select(-year), by = "GEOID")
es_data = wac_data %>%
inner_join(gen_data, by = "GEOID") %>%
mutate(gentrify = ifelse(year <= 2011, 0, gentrify))
summary_data = acs_data %>%
inner_join(gen_data, by = "GEOID") %>%
inner_join(wac_data, by = c("GEOID", "year")) %>%
group_by(GEOID) %>%
mutate(across(starts_with("p_"), ~lead(.x, order_by = year) - .x, .names = "diff_{.col}")) %>%
mutate(across(starts_with("d_"), ~(lead(.x, order_by = year) - .x)/.x, .names = "pc_{.col}")) %>%
mutate(across(c(medianhomevalue, medianincome, medianrent, pop), ~(lead(.x, order_by = year) - .x)/.x, .names = "pc_{.col}")) %>%
ungroup() %>%
filter(year == 2011)
write_csv(dd_data, "CleanData/Main/dd_data.csv") #Difference in differences data
write_csv(es_data, "CleanData/Main/es_data.csv") #Event study data
write_csv(summary_data, "CleanData/Main/summary_data.csv") #summary statistics data
#Change root directory
knitr::opts_knit$set(root.dir = "/Users/liampurkey/Desktop/Research/Gentrification")
#Load packages
library(magrittr)
library(readxl)
library(readr)
library(tidyverse)
library(sf)
library(spData)
library(tmap)
source("Code/Scripts/utils.R")
#Read in and format shapefile
map_data = st_read("RawData/Boundaries/NewYork.shp") %>%
left_join(read_csv("CleanData/Main/summary_data.csv", col_types = cols(GEOID = col_character())) %>% select(GEOID, gentrify), by = "GEOID") %>%
mutate(gentrify = case_when(gentrify == 0 ~ 1,
gentrify == 1 ~ 0,
is.na(gentrify) ~ 2))
nyc_map = tm_shape(map_data) + tm_polygons("gentrify", style = "cat", palette = c("red4", "#FDBEB9", "#DEEBF7"),
labels = c("Gentrifying", "Not Gentrifying", "Not in Sample"),
title = "Legend") +
tm_layout(legend.outside = TRUE, legend.text.size = .8, legend.title.size = 1, fontfamily = "Palatino", frame = FALSE,
asp = 1)
nyc_map
summary_data %>%
group_by(gentrify) %>%
summarize(mean = mean(pre_p_college_pop))
#Change root directory
knitr::opts_knit$set(root.dir = "/Users/liampurkey/Desktop/Research/Gentrification")
#Load Packages
library(magrittr)
library(readr)
library(readxl)
library(Ckmeans.1d.dp)
library(tidycensus)
library(tidyverse)
source("Code/Scripts/utils.R")
#Read in data used to create gentrification indicator
acs_data = read_csv("CleanData/ACS_clean.csv", col_types = cols(GEOID = col_character()))
ltdb_data = read_csv("CleanData/LTDB_clean.csv", col_types = cols(GEOID = col_character()))
wac_data = read_csv("CleanData/WAC_clean.csv", col_types = cols(GEOID = col_character()))
input_data = acs_data %>%
group_by(GEOID) %>%
mutate(diff_p_college_pop = lead(p_college_pop, order_by = year) - p_college_pop) %>%
ungroup() %>%
filter(year == 2011) %>%
inner_join(ltdb_data, by = "GEOID") %>%
mutate(pre_p_college_pop = p_college_pop - p_college_pop_2000) %>%
select(GEOID, medianincome, diff_p_college_pop, pre_p_college_pop)
gen_data = create.gentrification(income_var = "medianincome", college_var = "diff_p_college_pop", pre_var = "pre_p_college_pop",
income_pctile = .5, college_pctile_lower = .5, college_pctile_upper = .75, pre_pctile = .9, data = input_data) %>%
select(GEOID, gentrify, pre_p_college_pop)
dd_data = wac_data %>%
filter(year == 2011 | year == 2018) %>%
inner_join(gen_data, by = "GEOID") %>%
inner_join(acs_data %>% filter(year == 2011) %>% select(-year), by = "GEOID")
es_data = wac_data %>%
inner_join(gen_data, by = "GEOID") %>%
mutate(gentrify = ifelse(year <= 2011, 0, gentrify))
summary_data = acs_data %>%
inner_join(gen_data, by = "GEOID") %>%
inner_join(wac_data, by = c("GEOID", "year")) %>%
group_by(GEOID) %>%
mutate(across(starts_with("p_"), ~lead(.x, order_by = year) - .x, .names = "diff_{.col}")) %>%
mutate(across(starts_with("d_"), ~(lead(.x, order_by = year) - .x)/.x, .names = "pc_{.col}")) %>%
mutate(across(c(medianhomevalue, medianincome, medianrent, pop), ~(lead(.x, order_by = year) - .x)/.x, .names = "pc_{.col}")) %>%
ungroup() %>%
filter(year == 2011)
write_csv(dd_data, "CleanData/Main/dd_data.csv") #Difference in differences data
write_csv(es_data, "CleanData/Main/es_data.csv") #Event study data
write_csv(summary_data, "CleanData/Main/summary_data.csv") #summary statistics data
summary_data %>%
group_by(gentrify) %>%
summarize(mean = mean(pre_p_college_pop))
#Change root directory
knitr::opts_knit$set(root.dir = "/Users/liampurkey/Desktop/Research/Gentrification")
#Load packages
library(magrittr)
library(readxl)
library(readr)
library(tidyverse)
library(sf)
library(spData)
library(tmap)
source("Code/Scripts/utils.R")
#Read in and format shapefile
map_data = st_read("RawData/Boundaries/NewYork.shp") %>%
left_join(read_csv("CleanData/Main/summary_data.csv", col_types = cols(GEOID = col_character())) %>% select(GEOID, gentrify), by = "GEOID") %>%
mutate(gentrify = case_when(gentrify == 0 ~ 1,
gentrify == 1 ~ 0,
is.na(gentrify) ~ 2))
nyc_map = tm_shape(map_data) + tm_polygons("gentrify", style = "cat", palette = c("red4", "#FDBEB9", "#DEEBF7"),
labels = c("Gentrifying", "Not Gentrifying", "Not in Sample"),
title = "Legend") +
tm_layout(legend.outside = TRUE, legend.text.size = .8, legend.title.size = 1, fontfamily = "Palatino", frame = FALSE,
asp = 1)
nyc_map
#Change root directory
knitr::opts_knit$set(root.dir = "/Users/liampurkey/Desktop/Research/Gentrification")
#Load packages
library(magrittr)
library(readxl)
library(readr)
library(tidyverse)
library(sf)
library(spData)
library(tmap)
source("Code/Scripts/utils.R")
#Read in and format shapefile
map_data = st_read("RawData/Boundaries/NewYork.shp") %>%
left_join(read_csv("CleanData/Main/summary_data.csv", col_types = cols(GEOID = col_character())) %>% select(GEOID, gentrify), by = "GEOID") %>%
mutate(gentrify = case_when(gentrify == 0 ~ 1,
gentrify == 1 ~ 0,
is.na(gentrify) ~ 2))
nyc_map = tm_shape(map_data) + tm_polygons("gentrify", style = "cat", palette = c("red4", "#FDBEB9", "#DEEBF7"),
labels = c("Gentrifying", "Not Gentrifying", "Not in Sample"),
title = "Legend") +
tm_layout(legend.outside = TRUE, legend.text.size = .8, legend.title.size = 1, fontfamily = "Palatino", frame = FALSE,
asp = 1)
tmap_save(tm = nyc_map, filename = "Results/Summary/Plots/gentrification_map.png")
